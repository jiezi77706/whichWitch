# 🧪 NFT铸造测试完整指南

## 🎯 测试目标
完成WhichWitch v2.0的NFT铸造功能测试，确保用户可以成功在Sepolia测试网上铸造NFT。

## 📋 测试前准备

### 1. MetaMask设置
- ✅ 安装MetaMask浏览器扩展
- ✅ 创建或导入钱包
- ✅ 添加Sepolia测试网络

### 2. 获取测试ETH
访问以下任一水龙头获取Sepolia测试ETH：
- 🚰 [Sepolia Faucet](https://sepoliafaucet.com/)
- 🚰 [Alchemy Faucet](https://sepoliafaucet.com/)
- 🚰 [Chainlink Faucet](https://faucets.chain.link/sepolia)

**需要余额**: 至少 0.01 SEP ETH（用于Gas费）

### 3. 网络配置验证
确保MetaMask中的Sepolia网络配置正确：
```
网络名称: Sepolia Testnet
RPC URL: https://rpc.sepolia.org
Chain ID: 11155111
货币符号: SEP
区块浏览器: https://sepolia.etherscan.io
```

## 🚀 测试步骤

### 步骤1: 连接钱包
1. 访问WhichWitch应用
2. 点击"连接钱包"
3. 选择MetaMask
4. 授权连接

**预期结果**: 
- ✅ 钱包成功连接
- ✅ 显示钱包地址
- ✅ 显示网络状态

### 步骤2: 网络检查
1. 查看页面上的网络状态指示器
2. 如果显示"需要切换网络"，点击"切换到Sepolia测试网"
3. 在MetaMask中确认网络切换

**预期结果**:
- ✅ 显示"已连接到Sepolia测试网"
- ✅ 网络状态为绿色
- ✅ Chain ID显示为11155111

### 步骤3: 创建测试作品
1. 进入上传页面
2. 选择图片文件
3. 填写作品信息：
   - 标题: "NFT测试作品"
   - 描述: "这是一个NFT铸造测试"
   - 材料: "Digital"
   - 标签: "test", "nft"
4. **开启"铸造NFT"选项**
5. 点击"上传"

**预期结果**:
- ✅ 图片自动上传到IPFS
- ✅ 作品注册到区块链
- ✅ NFT自动铸造
- ✅ 显示成功页面

### 步骤4: 验证NFT铸造
1. 检查成功页面是否显示NFT信息
2. 记录Token ID和交易哈希
3. 在区块链浏览器中验证交易

**验证链接**:
```
https://sepolia.etherscan.io/tx/[交易哈希]
```

### 步骤5: 现有作品铸造NFT测试
1. 找到一个未铸造NFT的现有作品
2. 点击"铸造NFT"按钮
3. 填写NFT元数据
4. 点击"铸造NFT"
5. 在MetaMask中确认交易

**预期结果**:
- ✅ 交易成功发送
- ✅ 显示铸造成功
- ✅ NFT状态更新

## 🔍 故障排除

### 问题1: MetaMask显示主网而非测试网
**解决方案**:
1. 手动切换网络：MetaMask → 网络下拉 → Sepolia
2. 或使用页面上的"切换网络"按钮
3. 如果没有Sepolia网络，点击"添加网络"

### 问题2: 交易失败 - Gas估算错误
**解决方案**:
1. 检查钱包余额是否足够
2. 尝试增加Gas限制
3. 等待网络拥堵缓解后重试

### 问题3: 合约调用失败
**解决方案**:
1. 确认合约地址正确
2. 检查是否为作品创作者
3. 验证作品是否已注册到区块链

### 问题4: NFT已铸造错误
**解决方案**:
1. 检查作品是否已经铸造过NFT
2. 尝试铸造其他作品的NFT
3. 查看作品详情确认NFT状态

## 📊 测试检查清单

### 基础功能测试
- [ ] 钱包连接成功
- [ ] 网络切换正常
- [ ] 余额显示正确
- [ ] IPFS上传成功
- [ ] 作品注册成功

### NFT铸造测试
- [ ] 新作品同时铸造NFT
- [ ] 现有作品后续铸造NFT
- [ ] NFT元数据正确
- [ ] Token ID生成
- [ ] 交易哈希记录

### 用户体验测试
- [ ] 网络状态提示清晰
- [ ] 错误信息友好
- [ ] 进度显示准确
- [ ] 成功反馈完整
- [ ] 重试机制有效

### 数据一致性测试
- [ ] 区块链状态同步
- [ ] 数据库记录正确
- [ ] NFT状态缓存更新
- [ ] 交易历史记录

## 🎉 测试成功标准

### 完整流程成功
1. ✅ 用户可以连接MetaMask钱包
2. ✅ 自动或手动切换到Sepolia测试网
3. ✅ 上传图片时可选择铸造NFT
4. ✅ NFT铸造交易成功确认
5. ✅ 在区块链浏览器中可查看NFT
6. ✅ 应用中正确显示NFT状态

### 性能标准
- 🚀 IPFS上传 < 30秒
- ⚡ 交易确认 < 2分钟
- 📊 状态同步 < 10秒
- 🔄 页面响应 < 3秒

## 📞 获取帮助

如果测试过程中遇到问题，请提供：
1. 🔍 完整的错误信息截图
2. 🔗 交易哈希（如果有）
3. 💰 钱包地址
4. 🌐 当前网络状态
5. 🎯 具体的操作步骤

## 🔗 有用链接

- 📱 [MetaMask下载](https://metamask.io/)
- 🚰 [Sepolia水龙头](https://sepoliafaucet.com/)
- 🔍 [Sepolia浏览器](https://sepolia.etherscan.io/)
- 📚 [Wagmi文档](https://wagmi.sh/)
- 🎨 [OpenSea测试网](https://testnets.opensea.io/)

---

**🎯 开始测试吧！按照上述步骤，你应该能够成功完成NFT铸造测试。**